\begin{Verbatim}[commandchars=\\\{\},codes={\catcode`\$=3\catcode`\^=7\catcode`\_=8\relax}]
\PYG{n+nf}{insertNewlines}\PYG{+w}{ }\PYG{o+ow}{::}\PYG{+w}{ }\PYG{p}{[}\PYG{k+kt}{Soup}\PYG{o}{.}\PYG{k+kt}{Tag}\PYG{+w}{ }\PYG{k+kt}{String}\PYG{p}{]}\PYG{+w}{ }\PYG{o+ow}{\PYGZhy{}\PYGZgt{}}\PYG{+w}{ }\PYG{p}{[}\PYG{k+kt}{Soup}\PYG{o}{.}\PYG{k+kt}{Tag}\PYG{+w}{ }\PYG{k+kt}{String}\PYG{p}{]}
\PYG{n+nf}{insertNewlines}\PYG{+w}{ }\PYG{k+kt}{[]}\PYG{+w}{ }\PYG{o+ow}{=}\PYG{+w}{ }\PYG{k+kt}{[]}
\PYG{n+nf}{insertNewlines}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{x}\PYG{k+kt}{:}\PYG{n}{xs}\PYG{p}{)}\PYG{+w}{ }\PYG{o+ow}{=}\PYG{+w}{ }\PYG{k+kr}{if}\PYG{+w}{ }\PYG{p}{(}\PYG{k+kt}{Soup}\PYG{o}{.}\PYG{n}{isTagCloseName}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}pre\PYGZdq{}}\PYG{+w}{ }\PYG{n}{x}\PYG{p}{)}
\PYG{+w}{    }\PYG{k+kr}{then}\PYG{+w}{ }\PYG{k+kt}{Soup}\PYG{o}{.}\PYG{k+kt}{TagText}\PYG{+w}{ }\PYG{l+s}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n\PYGZbs{}n}\PYG{l+s}{=======================}\PYG{l+s+se}{\PYGZbs{}n\PYGZbs{}n}\PYG{l+s}{\PYGZdq{}}\PYG{k+kt}{:}\PYG{n}{x}\PYG{k+kt}{:}\PYG{n}{insertNewlines}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{xs}\PYG{p}{)}
\PYG{+w}{    }\PYG{k+kr}{else}\PYG{+w}{ }\PYG{n}{x}\PYG{k+kt}{:}\PYG{n}{insertNewlines}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{xs}\PYG{p}{)}
\end{Verbatim}
